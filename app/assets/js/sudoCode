song 


output = []
output.push(song)
blacklist = {}

playlistify = function{
  candidates = []
  current_song = output.last 
  parent = output.secondlast

  db.find current_song.children 
  if null
    blacklist.parent = current_song
    output.pop last
    playlistify

  else if parent.keys.count = children.length
    blacklist.parent = current song
    output.pop last
    playlistify

  else
    push each to candidates

    candidate = candidates[math.rand.roundDown]
    if blacklist.parent != current_song
      output.push candidate
      playlistify
    else
      playlistify

}



